<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini E‑Commerce — Static Demo</title>
  <meta name="description" content="Simple static e-commerce demo with product listing, cart, and admin panel (all frontend)." />
  <style>
    /* Simple clean styling — responsive grid, card layout */
    :root{--accent:#0b84ff;--muted:#6b7280;--bg:#f7f7fb}
    *{box-sizing:border-box}
    body{font-family:Inter,ui-sans-serif,system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0; background:var(--bg); color:#111}
    header{background:white;padding:16px 20px;display:flex;align-items:center;gap:16px;box-shadow:0 1px 3px rgba(0,0,0,.06);position:sticky;top:0;z-index:5}
    .logo{font-weight:700;color:var(--accent)}
    .search{flex:1}
    input.search-input{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e6e9ee}
    .controls{display:flex;gap:10px;align-items:center}
    .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(11,132,255,.12)}

    main{padding:20px;max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr 320px;gap:20px}
    .catalog{background:white;padding:16px;border-radius:12px;box-shadow:0 8px 20px rgba(18,22,30,.04)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}

    .card{background:white;border-radius:10px;padding:12px;border:1px solid #f0f2f5;display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:700}
    .muted{color:var(--muted);font-size:13px}

    aside.sidebar{background:white;padding:16px;border-radius:12px;box-shadow:0 8px 20px rgba(18,22,30,.04);height:fit-content}
    .cart-item{display:flex;gap:10px;align-items:center;border-bottom:1px dashed #eee;padding:8px 0}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:6px}
    .qty{display:flex;gap:6px;align-items:center}
    .small{font-size:13px}

    footer{max-width:1200px;margin:18px auto;color:var(--muted);font-size:13px;text-align:center}

    /* admin panel modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,.45);z-index:40}
    .modal.open{display:flex}
    .panel{background:white;padding:18px;border-radius:12px;max-width:720px;width:100%}
    label{display:block;font-size:13px;margin-top:10px}
    input[type=text], input[type=number], textarea, select{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9ee;margin-top:6px}

    /* responsive */
    @media(max-width:980px){main{grid-template-columns:1fr} aside.sidebar{order:2}}

  </style>
</head>
<body>
  <header>
    <div class="logo">Shoply</div>
    <div class="search"><input id="search" class="search-input" placeholder="Search products, e.g. sneakers" /></div>
    <div class="controls">
      <button id="open-admin" class="btn ghost">Admin</button>
      <button id="view-cart" class="btn">Cart (<span id="cart-count">0</span>)</button>
    </div>
  </header>

  <main>
    <section class="catalog">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h2 style="margin:0">Products</h2>
        <div class="muted">Showing <span id="result-count">0</span> items</div>
      </div>
      <div style="display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap">
        <select id="sort" style="padding:8px;border-radius:8px;border:1px solid #e6e9ee">
          <option value="new">Sort: Newest</option>
          <option value="price-asc">Price: Low → High</option>
          <option value="price-desc">Price: High → Low</option>
        </select>
        <select id="category" style="padding:8px;border-radius:8px;border:1px solid #e6e9ee">
          <option value="all">All categories</option>
        </select>
      </div>

      <div id="product-grid" class="grid"></div>
    </section>

    <aside class="sidebar">
      <h3 style="margin-top:0">Cart</h3>
      <div id="cart-list"></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <div><div class="muted small">Subtotal</div><div id="subtotal">₹0.00</div></div>
        <div style="display:flex;flex-direction:column;gap:8px">
          <button id="checkout" class="btn">Checkout</button>
          <button id="clear-cart" class="btn ghost">Clear</button>
        </div>
      </div>
    </aside>
  </main>

  <footer>Static demo • Data stored in your browser (localStorage). Not a production-ready backend.</footer>

  <!-- admin modal (add product) -->
  <div id="admin-modal" class="modal" aria-hidden="true">
    <div class="panel">
      <h3>Admin: Add / Edit Product</h3>
      <form id="admin-form">
        <label>Title<input name="title" required/></label>
        <label>Category<input name="category" required/></label>
        <label>Image URL<input name="image" placeholder="https://...jpg" required/></label>
        <label>Price (₹)<input name="price" type="number" min="0" step="0.01" required/></label>
        <label>Description<textarea name="description" rows="3"></textarea></label>
        <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
          <button type="button" id="close-admin" class="btn ghost">Cancel</button>
          <button class="btn">Save</button>
        </div>
      </form>
      <div style="margin-top:16px" class="muted small">This demo saves products and cart to your browser only (localStorage). To reset completely, clear localStorage or use the "Clear" controls.</div>
    </div>
  </div>

  <!-- checkout modal -->
  <div id="checkout-modal" class="modal" aria-hidden="true">
    <div class="panel">
      <h3>Checkout</h3>
      <div id="checkout-summary"></div>
      <form id="checkout-form" style="margin-top:12px">
        <label>Name<input name="name" required/></label>
        <label>Email<input name="email" type="email" required/></label>
        <label>Address<textarea name="address" rows="3" required></textarea></label>
        <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
          <button type="button" id="close-checkout" class="btn ghost">Cancel</button>
          <button class="btn">Place Order</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    /***** Simple static e-commerce app (frontend-only) *****
      Features:
        - Product listing (stored in localStorage)
        - Search, sort, filter by category
        - Cart with qty, subtotal (stored in localStorage)
        - Admin modal to add products
        - Checkout simulation
    */

    // default demo products (used only if localStorage empty)
    const defaultProducts = [
      {id:1,title:'Classic White Sneakers',category:'Footwear',price:2499.00,image:'https://images.unsplash.com/photo-1519741491516-6fb94b1b7e1d?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=6b6eb9f8b4a3b8a1f0fb8b6d9b6e1a7a',description:'Comfortable everyday sneakers.'},
      {id:2,title:'Minimal Wrist Watch',category:'Accessories',price:3499.00,image:'https://images.unsplash.com/photo-1518544881605-3cdb8d2b1e2b?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=4a4c2b8f9c3d1e0a',description:'Slim profile analog watch.'},
      {id:3,title:'Organic Cotton T‑Shirt',category:'Apparel',price:799.00,image:'https://images.unsplash.com/photo-1551854838-8d7a1a5c3c4f?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=1d2e3f4a5b6c7d8e',description:'Soft breathable tee.'},
      {id:4,title:'Noise‑Cancelling Headphones',category:'Electronics',price:8999.00,image:'https://images.unsplash.com/photo-1516116216624-53e697fedbe2?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8f7e6d5c4b3a2f1e',description:'Immersive sound for work and travel.'},
      {id:5,title:'Travel Backpack',category:'Bags',price:2599.00,image:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=ababababababababab',description:'Durable, water-resistant backpack.'}
    ];

    // keys
    const PKEY = 'shoply_products_v1';
    const CKEY = 'shoply_cart_v1';

    // util: load/save
    function saveProducts(list){localStorage.setItem(PKEY,JSON.stringify(list))}
    function loadProducts(){try{return JSON.parse(localStorage.getItem(PKEY))||[] }catch(e){return []}}
    function saveCart(cart){localStorage.setItem(CKEY,JSON.stringify(cart))}
    function loadCart(){try{return JSON.parse(localStorage.getItem(CKEY))||{} }catch(e){return {}}}

    // initialize data
    if(!localStorage.getItem(PKEY)){saveProducts(defaultProducts)}

    let products = loadProducts();
    let cart = loadCart();

    // elements
    const grid = document.getElementById('product-grid');
    const cartList = document.getElementById('cart-list');
    const subtotalEl = document.getElementById('subtotal');
    const cartCount = document.getElementById('cart-count');
    const resultCount = document.getElementById('result-count');
    const searchInput = document.getElementById('search');
    const sortSelect = document.getElementById('sort');
    const categorySelect = document.getElementById('category');
    const adminModal = document.getElementById('admin-modal');
    const adminForm = document.getElementById('admin-form');
    const openAdminBtn = document.getElementById('open-admin');
    const closeAdminBtn = document.getElementById('close-admin');
    const checkoutBtn = document.getElementById('checkout');
    const checkoutModal = document.getElementById('checkout-modal');
    const checkoutForm = document.getElementById('checkout-form');
    const checkoutSummary = document.getElementById('checkout-summary');
    const closeCheckout = document.getElementById('close-checkout');
    const clearCartBtn = document.getElementById('clear-cart');
    const viewCartBtn = document.getElementById('view-cart');

    // render category options
    function populateCategories(){
      const cats = Array.from(new Set(products.map(p=>p.category))).sort();
      categorySelect.innerHTML = '<option value="all">All categories</option>' + cats.map(c=>`<option value="${c}">${c}</option>`).join('')
    }

    // render products
    function renderProducts(){
      const q = searchInput.value.trim().toLowerCase();
      const cat = categorySelect.value;
      let list = products.filter(p=> (p.title+ ' '+(p.description||'')).toLowerCase().includes(q));
      if(cat && cat!=='all') list = list.filter(p=>p.category===cat);
      const sort = sortSelect.value;
      if(sort==='price-asc') list.sort((a,b)=>a.price-b.price);
      else if(sort==='price-desc') list.sort((a,b)=>b.price-a.price);
      else list.sort((a,b)=>b.id - a.id); // new->old

      resultCount.textContent = list.length;
      grid.innerHTML = list.map(p=>`
        <article class="card" data-id="${p.id}">
          <img loading="lazy" src="${p.image}" alt="${escapeHtml(p.title)}">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:600">${escapeHtml(p.title)}</div>
            <div class="price">₹${p.price.toFixed(2)}</div>
          </div>
          <div class="muted small">${escapeHtml(p.category)}</div>
          <div class="muted small">${escapeHtml((p.description||'').slice(0,80))}${(p.description||'').length>80? '...':''}</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn add-to-cart" data-id="${p.id}">Add to cart</button>
            <button class="btn ghost view-details" data-id="${p.id}">View</button>
          </div>
        </article>
      `).join('\n');
    }

    // escape helper
    function escapeHtml(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}

    // cart operations
    function addToCart(id, qty=1){
      const key = String(id);
      cart[key] = (cart[key]||0) + qty;
      saveCart(cart); renderCart();
    }

    function removeFromCart(id){delete cart[String(id)]; saveCart(cart); renderCart();}
    function updateQty(id, qty){ if(qty<=0) removeFromCart(id); else {cart[String(id)] = qty; saveCart(cart); renderCart();}}
    function clearCart(){cart={}; saveCart(cart); renderCart();}

    function renderCart(){
      const entries = Object.entries(cart);
      if(entries.length===0){cartList.innerHTML = '<div class="muted">Your cart is empty</div>'; cartCount.textContent='0'; subtotalEl.textContent='₹0.00'; return}
      // build items
      let sum = 0;
      cartList.innerHTML = entries.map(([id,qty])=>{
        const p = products.find(x=>String(x.id)===id);
        if(!p) return '';
        const line = p.price * qty; sum += line;
        return `
          <div class="cart-item" data-id="${p.id}">
            <img src="${p.image}" alt="${escapeHtml(p.title)}" />
            <div style="flex:1">
              <div style="font-weight:600">${escapeHtml(p.title)}</div>
              <div class="muted small">₹${p.price.toFixed(2)} × ${qty} = ₹${line.toFixed(2)}</div>
            </div>
            <div class="qty">
              <button class="btn ghost dec" data-id="${p.id}">-</button>
              <div class="muted">${qty}</div>
              <button class="btn ghost inc" data-id="${p.id}">+</button>
            </div>
          </div>
        `
      }).join('\n');
      subtotalEl.textContent = `₹${sum.toFixed(2)}`;
      cartCount.textContent = entries.reduce((s,[,q])=>s+q,0);
    }

    // admin: open modal
    openAdminBtn.addEventListener('click',()=>{adminModal.classList.add('open')});
    closeAdminBtn.addEventListener('click',()=>{adminModal.classList.remove('open')});
    adminModal.addEventListener('click',(e)=>{ if(e.target===adminModal) adminModal.classList.remove('open') })

    // admin form submit -> add product
    adminForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(adminForm).entries());
      const nextId = products.length? Math.max(...products.map(p=>p.id))+1 : 1;
      const prod = {id:nextId, title:data.title, category:data.category, price:parseFloat(data.price)||0, image:data.image, description:data.description};
      products.unshift(prod); saveProducts(products); populateCategories(); renderProducts(); adminForm.reset(); adminModal.classList.remove('open');
    })

    // product grid click handlers (delegation)
    grid.addEventListener('click',(e)=>{
      const add = e.target.closest('.add-to-cart');
      if(add){addToCart(add.dataset.id,1);return}
      const view = e.target.closest('.view-details');
      if(view){
        const p = products.find(x=>String(x.id)===view.dataset.id);
        if(p){ alert(`${p.title}\n\nPrice: ₹${p.price.toFixed(2)}\nCategory: ${p.category}\n\n${p.description||''}`)}
      }
    })

    // cart controls (delegation)
    cartList.addEventListener('click',(e)=>{
      const inc = e.target.closest('.inc'); if(inc){ const id=inc.dataset.id; updateQty(id,(cart[id]||0)+1); return }
      const dec = e.target.closest('.dec'); if(dec){ const id=dec.dataset.id; updateQty(id,(cart[id]||0)-1); return }
    })

    // search/sort/category handlers
    [searchInput, sortSelect, categorySelect].forEach(el=>el.addEventListener('input',()=>renderProducts()));

    // checkout flow
    checkoutBtn.addEventListener('click',()=>{
      const entries = Object.entries(cart);
      if(entries.length===0){ alert('Your cart is empty.'); return }
      // summary
      let sum=0; const rows = entries.map(([id,qty])=>{ const p=products.find(x=>String(x.id)===id); const line=p.price*qty; sum+=line; return `<div style="display:flex;justify-content:space-between"><div>${escapeHtml(p.title)} × ${qty}</div><div>₹${line.toFixed(2)}</div></div>`}).join('');
      checkoutSummary.innerHTML = `<div>${rows}</div><hr/><div style="display:flex;justify-content:space-between;font-weight:700">Total:<div>₹${sum.toFixed(2)}</div></div>`;
      checkoutModal.classList.add('open');
    });
    closeCheckout.addEventListener('click',()=>checkoutModal.classList.remove('open'));
    checkoutModal.addEventListener('click',(e)=>{ if(e.target===checkoutModal) checkoutModal.classList.remove('open') })

    checkoutForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      // simple simulated order
      const data = Object.fromEntries(new FormData(checkoutForm).entries());
      const order = {
        id: 'ORD' + Date.now(), customer:data.name, email:data.email, address:data.address, items:cart, placedAt:new Date().toISOString()
      };
      // store last order for demo
      localStorage.setItem('shoply_last_order', JSON.stringify(order));
      alert('Order placed! Order ID: ' + order.id);
      clearCart(); checkoutModal.classList.remove('open'); checkoutForm.reset();
    })

    clearCartBtn.addEventListener('click',()=>{ if(confirm('Clear cart?')) clearCart() })

    // view cart button scrolls to cart
    viewCartBtn.addEventListener('click',()=>{ window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'}) })

    // utility: attach add-to-cart btns when products rendered (use event delegation already)

    // initial render
    populateCategories(); renderProducts(); renderCart();

    // small keyboard shortcut: / focuses search
    window.addEventListener('keydown',(e)=>{ if(e.key==='/' && document.activeElement.tagName!=='INPUT' && document.activeElement.tagName!=='TEXTAREA'){ e.preventDefault(); searchInput.focus() } })

  </script>
</body>
</html>
